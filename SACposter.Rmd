---
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

#Title

Author

Affiliations

## GitHub Documents

This is an R Markdown format used for publishing markdown documents to GitHub. When you click the **Knit** button all R code chunks are run and a markdown file (.md) suitable for publishing to GitHub is generated.

## Including Code

You can include R code in the document as follows:

```{r cars}
summary(cars)
```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.

```{r}
library(dplyr)
library(readr)
library(tidyverse)
library(googlesheets4)

#read in data
np_url <- "https://docs.google.com/spreadsheets/d/1hfK3ptAkMU4AiM5PknHe4IebFl29wEWNdMKpc5nEC4M/edit#gid=0"
np_data <-
  read_sheet(np_url) %>% 
  left_join(read_sheet(np_url, sheet = 2)) %>% 
  print()

houston_url <- "https://docs.google.com/spreadsheets/d/1-VpDe1FBQKK1nWYI_HOV8qVGD1fSHKUoe65E11iqOEU/edit#gid=1776011343"

houston_data <-
  read_sheet(houston_url) %>% 
  left_join(read_sheet(houston_url, sheet = 2)) %>% 
  print()

#manipulate rows
data <-
  bind_rows(
    np_data, 
    houston_data
  ) %>% 
  mutate(
    plot = factor(plot)
  )


data_presence_site <- 
  data %>% 
  distinct(site, status) %>% 
  mutate(present = TRUE) %>% 
  pivot_wider(
    names_from = "site", 
    values_from = "present", 
    values_fill = FALSE
  ) %>% 
  print()

filter(
  data_presence_site,
  !Houston,
  !NP
) %>% 
  arrange(status)
data %>% 
  count(site, plot, status, name = "n_spp") %>% 
  group_by(site) %>% 
  mutate(n_site = sum(n_spp), p = n_spp/n_site) %>% 
  group_by(status, site) %>% 
  summarise(sum_p = sum(p)) %>% 
  ggplot() +
  geom_col(mapping = aes(x = site, y = sum_p, fill = status),
           position = "stack")

```

```{r}
library(tidyverse)
library(googlesheets4)

NP_Species_20 <- read_sheet("https://docs.google.com/spreadsheets/d/1rVNHuyM9z6qAGKWknkn8j7zuJhFyHJeZnLgxxVdpM-4/edit#gid=0")
NP_Species_20


Houston_Species_20 <- read_sheet("https://docs.google.com/spreadsheets/d/1E4_RjXlmtJN9BJ0-z-cDE3Mzdpym_Bl0bLrklUKAsu8/edit#gid=0")


data <-
  bind_rows(
    NP_Species_20, 
    Houston_Species_20
  ) %>% 
  mutate(
    plot = factor(plot)
  )

count(data, taxa) %>% 
  count()

count(data, site, taxa) %>% 
  count(site)

data_presence_site <- 
  data %>% 
  distinct(site, taxa) %>% 
  mutate(present = TRUE) %>% 
  pivot_wider(
    names_from = "site", 
    values_from = "present", 
    values_fill = FALSE
  ) %>% 
  print()

filter(
  data_presence_site,
  !Houston,
  !MSUM_NP
) %>% 
  arrange(taxa)

np_species_div <- data(taxa, plot)
np_species_div


#FOR POSTER
data %>% 
  count(site, plot, treatment, name = "n_spp") %>% 
  ggplot() +
  geom_col (size = 3) + (mapping = aes(x = plot, y = n_spp, fill = treatment)) +
  facet_wrap(~ site)
```

```{r}
library(tidyverse)
library(googlesheets4)

NP_Species_18 <- read_sheet("https://docs.google.com/spreadsheets/d/1bBaDxI7PnZIbDDT4N_kmLap8wHPJO6cyj4Qaxv3xwvI/edit#gid=0")
NP_Species_18

houston_url <-"https://docs.google.com/spreadsheets/d/1dE-9shHj4D0H8DHCF25JeJpycBEBOA5x38j4uQILnJs/edit#gid=0"

Houston_Species_18 <- 
read_sheet(houston_url, sheet = "data")


data <-
  bind_rows(
    NP_Species_18, 
    Houston_Species_18
  ) %>% 
  mutate(
    plot = factor(plot)
  )

count(data, taxa) %>% 
  count()

count(data, site, taxa) %>% 
  count(site)

data_presence_site <- 
  data %>% 
  distinct(site, taxa) %>% 
  mutate(present = TRUE) %>% 
  pivot_wider(
    names_from = "site", 
    values_from = "present", 
    values_fill = FALSE
  ) %>% 
  print()

filter(
  data_presence_site,
  !Houston,
  !MSUM_NP
) %>% 
  arrange(taxa)

np_species_div <- data(taxa, plot)
np_species_div


#FOR POSTER
data %>% 
  count(site, plot, treatment, name = "n_spp") %>% 
  ggplot() +
  geom_col (size = 3) + (mapping = aes(x = plot, y = n_spp, fill = treatment)) +
  facet_wrap(~ site)
```
